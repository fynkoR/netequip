<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ—Ä—Ç—ã –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è - NetEquip</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<nav class="navbar">
    <div class="nav-brand">üåê NetEquip</div>
    <ul class="nav-menu">
        <li><a href="index.html">–î–∞—à–±–æ—Ä–¥</a></li>
        <li><a href="equipment-types.html">–¢–∏–ø—ã –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è</a></li>
        <li><a href="employees.html">–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</a></li>
        <li><a href="equipment.html">–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</a></li>
        <li><a href="device-ports.html" class="active">–ü–æ—Ä—Ç—ã</a></li>
        <li><a href="ip-addresses.html">IP-–∞–¥—Ä–µ—Å–∞</a></li>
        <li><a href="maintenance.html">–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ</a></li>
    </ul>
</nav>

<div class="container">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <h1>üîå –ü–æ—Ä—Ç—ã –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è</h1>
        <button class="btn btn-primary" onclick="openModal()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–æ—Ä—Ç</button>
    </div>

    <!-- –§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫ -->
    <div class="filters">
        <div class="filter-row">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—é, –æ–ø–∏—Å–∞–Ω–∏—é..." onkeyup="filterTable()">
            </div>
            <select id="equipmentFilter" onchange="filterTable()">
                <option value="">–í—Å—ë –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</option>
            </select>
            <select id="statusFilter" onchange="filterTable()">
                <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                <option value="Active">Active</option>
                <option value="Inactive">Inactive</option>
                <option value="Reserved">Reserved</option>
            </select>
            <select id="typeFilter" onchange="filterTable()">
                <option value="">–í—Å–µ —Ç–∏–ø—ã</option>
            </select>
            <select id="connectionFilter" onchange="filterTable()">
                <option value="">–í—Å–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</option>
                <option value="connected">–ü–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–µ</option>
                <option value="available">–°–≤–æ–±–æ–¥–Ω—ã–µ</option>
            </select>
            <button class="btn btn-secondary" onclick="resetFilters()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</button>
        </div>
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="stats-mini">
        <div class="stat-mini-card">
            <span class="stat-mini-label">–í—Å–µ–≥–æ –ø–æ—Ä—Ç–æ–≤:</span>
            <span class="stat-mini-value" id="totalCount">0</span>
        </div>
        <div class="stat-mini-card">
            <span class="stat-mini-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö:</span>
            <span class="stat-mini-value" id="activeCount">0</span>
        </div>
        <div class="stat-mini-card">
            <span class="stat-mini-label">–ü–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã—Ö:</span>
            <span class="stat-mini-value" id="connectedCount">0</span>
        </div>
        <div class="stat-mini-card">
            <span class="stat-mini-label">–û—Ç–æ–±—Ä–∞–∂–µ–Ω–æ:</span>
            <span class="stat-mini-value" id="displayedCount">0</span>
        </div>
    </div>

    <!-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ—Ä—Ç–æ–≤ -->
    <div class="table-container">
        <table id="portsTable">
            <thead>
            <tr>
                <th>ID</th>
                <th>–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</th>
                <th>–ü–æ—Ä—Ç ‚Ññ</th>
                <th>–¢–∏–ø</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>–°–∫–æ—Ä–æ—Å—Ç—å</th>
                <th>–ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫</th>
                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
            </thead>
            <tbody id="portsBody">
            <tr><td colspan="9" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</td></tr>
            </tbody>
        </table>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
<div id="modal" class="modal">
    <div class="modal-content modal-large">
        <div class="modal-header">
            <h2 id="modalTitle">–î–æ–±–∞–≤–∏—Ç—å –ø–æ—Ä—Ç</h2>
            <span class="modal-close" onclick="closeModal()">‚úñ</span>
        </div>
        <form id="portForm" onsubmit="savePort(event)">
            <input type="hidden" id="portId">

            <div class="form-grid">
                <div class="form-group">
                    <label for="equipmentId">–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ *</label>
                    <select id="equipmentId" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="portNumber">–ù–æ–º–µ—Ä –ø–æ—Ä—Ç–∞ *</label>
                    <input type="number"
                           id="portNumber"
                           required
                           min="1"
                           max="256"
                           placeholder="1">
                    <small class="form-hint">–û—Ç 1 –¥–æ 256</small>
                </div>
            </div>

            <div class="form-grid">
                <div class="form-group">
                    <label for="portType">–¢–∏–ø –ø–æ—Ä—Ç–∞</label>
                    <input type="text"
                           id="portType"
                           placeholder="Ethernet, Fiber, SFP..."
                           list="portTypeList">
                    <datalist id="portTypeList">
                        <option value="Ethernet">
                        <option value="Fast Ethernet">
                        <option value="Gigabit Ethernet">
                        <option value="10G Ethernet">
                        <option value="Fiber">
                        <option value="SFP">
                        <option value="SFP+">
                        <option value="QSFP">
                        <option value="USB">
                        <option value="Console">
                    </datalist>
                </div>

                <div class="form-group">
                    <label for="status">–°—Ç–∞—Ç—É—Å *</label>
                    <select id="status" required>
                        <option value="Active">Active</option>
                        <option value="Inactive">Inactive</option>
                        <option value="Reserved">Reserved</option>
                    </select>
                </div>
            </div>

            <div class="form-grid">
                <div class="form-group">
                    <label for="speed">–°–∫–æ—Ä–æ—Å—Ç—å</label>
                    <input type="text"
                           id="speed"
                           placeholder="1 Gbps, 10 Gbps..."
                           list="speedList">
                    <datalist id="speedList">
                        <option value="10 Mbps">
                        <option value="100 Mbps">
                        <option value="1 Gbps">
                        <option value="10 Gbps">
                        <option value="25 Gbps">
                        <option value="40 Gbps">
                        <option value="100 Gbps">
                    </datalist>
                </div>

                <div class="form-group">
                    <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <input type="text"
                           id="description"
                           placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ—Ä—Ç–∞">
                </div>
            </div>

            <div class="form-section">
                <h3>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –¥—Ä—É–≥–æ–º—É –ø–æ—Ä—Ç—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</h3>

                <div class="form-grid">
                    <div class="form-group">
                        <label for="connectedToEquipmentId">–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è</label>
                        <select id="connectedToEquipmentId" onchange="loadTargetPorts()">
                            <option value="">–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="connectedToPortId">–ü–æ—Ä—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è</label>
                        <select id="connectedToPortId" disabled>
                            <option value="">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <button type="submit" class="btn btn-success">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button type="button" class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </form>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π -->
<div id="detailsModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>üìã –î–µ—Ç–∞–ª–∏ –ø–æ—Ä—Ç–∞</h2>
            <span class="modal-close" onclick="closeDetailsModal()">‚úñ</span>
        </div>
        <div class="details-content">
            <div class="detail-row">
                <span class="detail-label">ID:</span>
                <span class="detail-value" id="detailId"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ:</span>
                <span class="detail-value" id="detailEquipmentName"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">–ù–æ–º–µ—Ä –ø–æ—Ä—Ç–∞:</span>
                <span class="detail-value" id="detailPortNumber"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">–¢–∏–ø:</span>
                <span class="detail-value" id="detailPortType"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">–°—Ç–∞—Ç—É—Å:</span>
                <span class="detail-value" id="detailStatus"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">–°–∫–æ—Ä–æ—Å—Ç—å:</span>
                <span class="detail-value" id="detailSpeed"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">–ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫:</span>
                <span class="detail-value" id="detailConnection"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">–û–ø–∏—Å–∞–Ω–∏–µ:</span>
                <span class="detail-value" id="detailDescription"></span>
            </div>
        </div>
        <div class="action-buttons">
            <button class="btn btn-primary" onclick="editFromDetails()">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
            <button class="btn btn-warning" onclick="disconnectFromDetails()">üîå –û—Ç–∫–ª—é—á–∏—Ç—å</button>
            <button class="btn btn-secondary" onclick="closeDetailsModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–æ—Ä—Ç–æ–≤ -->
<div id="connectModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>üîó –ü–æ–¥–∫–ª—é—á–∏—Ç—å –ø–æ—Ä—Ç—ã</h2>
            <span class="modal-close" onclick="closeConnectModal()">‚úñ</span>
        </div>
        <div style="padding: 1rem;">
            <p>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞: <strong id="sourcePortInfo"></strong></p>

            <div class="form-group">
                <label for="targetEquipmentSelect">–í—ã–±–µ—Ä–∏—Ç–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è</label>
                <select id="targetEquipmentSelect" onchange="loadTargetPortsForConnect()">
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ...</option>
                </select>
            </div>

            <div class="form-group">
                <label for="targetPortSelect">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Ä—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è</label>
                <select id="targetPortSelect" disabled>
                    <option value="">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</option>
                </select>
            </div>
        </div>
        <div class="action-buttons">
            <button class="btn btn-success" onclick="confirmConnect()">üîó –ü–æ–¥–∫–ª—é—á–∏—Ç—å</button>
            <button class="btn btn-secondary" onclick="closeConnectModal()">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>
</div>

<script src="js/api.js"></script>
<script src="js/device-ports.js"></script>
</body>
</html>
