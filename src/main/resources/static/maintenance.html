<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò—Å—Ç–æ—Ä–∏—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è - NetEquip</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<nav class="navbar">
    <div class="nav-brand">üåê NetEquip</div>
    <ul class="nav-menu">
        <li><a href="index.html">–î–∞—à–±–æ—Ä–¥</a></li>
        <li><a href="equipment-types.html">–¢–∏–ø—ã –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è</a></li>
        <li><a href="employees.html">–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</a></li>
        <li><a href="equipment.html">–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</a></li>
        <li><a href="device-ports.html">–ü–æ—Ä—Ç—ã</a></li>
        <li><a href="ip-addresses.html">IP-–∞–¥—Ä–µ—Å–∞</a></li>
        <li><a href="maintenance.html" class="active">–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ</a></li>
    </ul>
</nav>

<div class="container">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <h1>üîß –ò—Å—Ç–æ—Ä–∏—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è</h1>
        <button class="btn btn-primary" onclick="openModal()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å</button>
    </div>

    <!-- –§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫ -->
    <div class="filters">
        <div class="filter-row">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—é, –æ–ø–∏—Å–∞–Ω–∏—é, —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É..." onkeyup="filterTable()">
            </div>
            <select id="equipmentFilter" onchange="filterTable()">
                <option value="">–í—Å—ë –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</option>
            </select>
            <select id="typeFilter" onchange="filterTable()">
                <option value="">–í—Å–µ —Ç–∏–ø—ã</option>
                <option value="Routine">Routine</option>
                <option value="Repair">Repair</option>
                <option value="Upgrade">Upgrade</option>
                <option value="Emergency">Emergency</option>
                <option value="Preventive">Preventive</option>
            </select>
            <select id="employeeFilter" onchange="filterTable()">
                <option value="">–í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</option>
            </select>
            <select id="dateRangeFilter" onchange="filterByDateRange()">
                <option value="">–í–µ—Å—å –ø–µ—Ä–∏–æ–¥</option>
                <option value="7">–ü–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π</option>
                <option value="30">–ü–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π</option>
                <option value="90">–ü–æ—Å–ª–µ–¥–Ω–∏–µ 90 –¥–Ω–µ–π</option>
                <option value="365">–ü–æ—Å–ª–µ–¥–Ω–∏–π –≥–æ–¥</option>
            </select>
            <button class="btn btn-secondary" onclick="resetFilters()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</button>
        </div>
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="stats-mini">
        <div class="stat-mini-card">
            <span class="stat-mini-label">–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π:</span>
            <span class="stat-mini-value" id="totalCount">0</span>
        </div>
        <div class="stat-mini-card stat-warning">
            <span class="stat-mini-label">–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö:</span>
            <span class="stat-mini-value" id="overdueCount">0</span>
        </div>
        <div class="stat-mini-card">
            <span class="stat-mini-label">–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:</span>
            <span class="stat-mini-value" id="totalCost">0 ‚ÇΩ</span>
        </div>
        <div class="stat-mini-card">
            <span class="stat-mini-label">–û—Ç–æ–±—Ä–∞–∂–µ–Ω–æ:</span>
            <span class="stat-mini-value" id="displayedCount">0</span>
        </div>
    </div>

    <!-- –¢–∞–±–ª–∏—Ü–∞ –∏—Å—Ç–æ—Ä–∏–∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è -->
    <div class="table-container">
        <table id="maintenanceTable">
            <thead>
            <tr>
                <th>ID</th>
                <th>–î–∞—Ç–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è</th>
                <th>–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</th>
                <th>–¢–∏–ø</th>
                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                <th>–°–æ—Ç—Ä—É–¥–Ω–∏–∫</th>
                <th>–°—Ç–æ–∏–º–æ—Å—Ç—å</th>
                <th>–°–ª–µ–¥—É—é—â–µ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
            </thead>
            <tbody id="maintenanceBody">
            <tr><td colspan="9" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</td></tr>
            </tbody>
        </table>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
<div id="modal" class="modal">
    <div class="modal-content modal-large">
        <div class="modal-header">
            <h2 id="modalTitle">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –æ–± –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–∏</h2>
            <span class="modal-close" onclick="closeModal()">‚úñ</span>
        </div>
        <form id="maintenanceForm" onsubmit="saveMaintenance(event)">
            <input type="hidden" id="maintenanceId">

            <div class="form-grid">
                <div class="form-group">
                    <label for="equipmentId">–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ *</label>
                    <select id="equipmentId" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="date">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è *</label>
                    <input type="datetime-local" id="date" required>
                    <small class="form-hint">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —Ä–∞–±–æ—Ç</small>
                </div>
            </div>

            <div class="form-grid">
                <div class="form-group">
                    <label for="type">–¢–∏–ø –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è *</label>
                    <select id="type" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø...</option>
                        <option value="Routine">Routine - –ü–ª–∞–Ω–æ–≤–æ–µ</option>
                        <option value="Repair">Repair - –†–µ–º–æ–Ω—Ç</option>
                        <option value="Upgrade">Upgrade - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ</option>
                        <option value="Emergency">Emergency - –ê–≤–∞—Ä–∏–π–Ω–æ–µ</option>
                        <option value="Preventive">Preventive - –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="performedById">–í—ã–ø–æ–ª–Ω–∏–ª —Å–æ—Ç—Ä—É–¥–Ω–∏–∫</label>
                    <select id="performedById">
                        <option value="">–ù–µ —É–∫–∞–∑–∞–Ω</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç *</label>
                <textarea id="description"
                          rows="4"
                          required
                          placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç, –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏–π..."></textarea>
                <small class="form-hint">–£–∫–∞–∂–∏—Ç–µ –¥–µ—Ç–∞–ª–∏ –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω–æ–≥–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è</small>
            </div>

            <div class="form-grid">
                <div class="form-group">
                    <label for="cost">–°—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞–±–æ—Ç (‚ÇΩ)</label>
                    <input type="number"
                           id="cost"
                           min="0"
                           step="0.01"
                           placeholder="0.00">
                    <small class="form-hint">–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞–±–æ—Ç –∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</small>
                </div>

                <div class="form-group">
                    <label for="nextMaintenanceDate">–î–∞—Ç–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è</label>
                    <input type="date" id="nextMaintenanceDate">
                    <small class="form-hint">–ü–ª–∞–Ω–∏—Ä—É–µ–º–∞—è –¥–∞—Ç–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è</small>
                </div>
            </div>

            <div class="action-buttons">
                <button type="submit" class="btn btn-success">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button type="button" class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </form>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π -->
<div id="detailsModal" class="modal">
    <div class="modal-content modal-large">
        <div class="modal-header">
            <h2>üìã –î–µ—Ç–∞–ª–∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è</h2>
            <span class="modal-close" onclick="closeDetailsModal()">‚úñ</span>
        </div>
        <div class="details-content">
            <div class="detail-row">
                <span class="detail-label">ID:</span>
                <span class="detail-value" id="detailId"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ:</span>
                <span class="detail-value" id="detailEquipmentName"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">–î–∞—Ç–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è:</span>
                <span class="detail-value" id="detailDate"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">–¢–∏–ø:</span>
                <span class="detail-value" id="detailType"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">–í—ã–ø–æ–ª–Ω–∏–ª:</span>
                <span class="detail-value" id="detailPerformedBy"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">–°—Ç–æ–∏–º–æ—Å—Ç—å:</span>
                <span class="detail-value" id="detailCost"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">–°–ª–µ–¥—É—é—â–µ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ:</span>
                <span class="detail-value" id="detailNextDate"></span>
            </div>
            <div class="detail-row detail-full">
                <span class="detail-label">–û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç:</span>
            </div>
            <div class="detail-description" id="detailDescription"></div>
        </div>
        <div class="action-buttons">
            <button class="btn btn-primary" onclick="editFromDetails()">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
            <button class="btn btn-secondary" onclick="closeDetailsModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>
</div>

<script src="js/api.js"></script>
<script src="js/maintenance.js"></script>
</body>
</html>
